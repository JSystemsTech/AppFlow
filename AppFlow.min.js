"use strict";var ACTIVE_CLASS="active",HIDDEN_CLASS="hide-inactive",APP_OPEN_CLASS="app-open",CLOSED_CLASS="app-closed",SLIDE_CLASSES="slide-in-left slide-out-right slide-out-left slide-in-right",SLIDE_IN_RIGHT="slide-in-right",SLIDE_OUT_RIGHT="slide-out-right",SLIDE_IN_LEFT="slide-in-left",SLIDE_OUT_LEFT="slide-out-left",SLIDE_DIRECTION={LEFT:{IN:ACTIVE_CLASS+" "+SLIDE_IN_LEFT,OUT:SLIDE_OUT_RIGHT},RIGHT:{IN:ACTIVE_CLASS+" "+SLIDE_IN_RIGHT,OUT:SLIDE_OUT_LEFT}};$(document).ready(function(){var a,t=function(a,t,e,n){i(a,function(){a.removeClass(ACTIVE_CLASS).attr("aria-expanded","false"),a.addClass(CLOSED_CLASS),a.attr("tabindex","0"),a.focus(),a.trigger("app-closed",a,t,n||{}),o(t),"function"==typeof e&&e()}),t.removeClass(HIDDEN_CLASS+" "+APP_OPEN_CLASS)},e=function(a){return parseInt(a.attr("app-index"))},n=function(a,r,s){var l=r.find("> .app."+ACTIVE_CLASS);l.length>0?l.attr("data-tray")===a.attr("data-tray")?function(a,t,n,i){t.removeClass(CLOSED_CLASS),p(t,function(){a.removeClass(ACTIVE_CLASS+" "+SLIDE_CLASSES),a.addClass(CLOSED_CLASS),t.removeClass(SLIDE_CLASSES),a.trigger("app-closed",a,n,{}),t.trigger("app-opened",t,n,i||{})});var r=e(a),s=e(t),o=SLIDE_DIRECTION.RIGHT;s<r&&(o=SLIDE_DIRECTION.LEFT),t.addClass(o.IN),a.addClass(o.OUT)}(l,a,r,s):t($(l[0]),r,function(){n(a,r,s)}):(i(a,function(){r.addClass(HIDDEN_CLASS),r.focus(),o(r),a.focus(),a.attr("tabindex","-1"),a.trigger("app-opened",a,r,s||{})}),a.removeClass(CLOSED_CLASS).addClass(ACTIVE_CLASS).attr("aria-expanded","true"),r.addClass(APP_OPEN_CLASS))},i=function(a,t){a.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",t)},p=function(a,t){a.one("webkitAnimationEnd oanimationend MSAnimationEnd",t)},r=function(a){var e=$(this),i=e.attr("id")||"Tray"+a;e.attr("id",i);var p,r,s,o=e.find("> .app");o.attr("aria-expanded","false").attr("tabindex","0"),o.addClass(CLOSED_CLASS),$.each(o,function(a,t){var e=$(t),n=e.attr("id")||i+"App"+a;e.attr("id",n),e.attr("data-tray","#"+i),e.attr("app-index",a);var p=n+"Title",r=e.find("> .app-title").attr("id")||p;e.find("> .app-title").attr("id",r),e.attr("aria-labelledby",r)}),p=o,r=e,s={"app-toggle":function(a,e){a.preventDefault();var i=$(a.target).closest(".app");i.hasClass(ACTIVE_CLASS)?t(i,r,null,e):n(i,r,e)},"app-open":function(a,t){a.preventDefault();var e=$(a.target).closest(".app");n(e,r,t)},"app-close":function(a,e){a.preventDefault();var n=$(a.target).closest(".app");t(n,r,null,e)},click:function(a){var t=$(a.target).closest(".app"),e=t.hasClass(ACTIVE_CLASS),i=$(a.target).closest(".app-header").length>0,p=$(a.target).closest(".app-title").length>0;e||!i&&!p||(a.preventDefault(),n(t,r))},keypress:function(a){32===a.which&&$(this).hasClass("app")&&(a.preventDefault(),$(this).find("> .app-header").trigger("click"))}},$.each(s,function(a,t){p.on(a,t)})},s=function(){var a=$(this).find("> .app");$.each(["click","app-toggle","app-close","app-open","app-closed","app-opened"],function(t,e){a.off(e)})},o=function(a){var t=a.parent();t.hasClass("tray-wrapper auto-resize")&&l(null,t[0])},l=function(a,t){var e=$(window).height(),n=$(t).find("> .app-tray").height();n>e&&(e=n),$(t).height(e)};$(window).unload(function(){$(".app-tray").each(s),$.each([$("[data-toggle-app]"),$(".app-close"),$(".close-all-apps")],function(a,t){t.off("click")})}),$(".app-tray").each(r),$("[data-close-tray-apps]").on("click",function(){var a=$($(this).attr("data-close-tray-apps")+".app-open");if(a.length>0){var e=a.find("> .app."+ACTIVE_CLASS);e.length>0&&t(e,a)}}),$(".app-close").on("click",function(a){var e=$(a.target).closest(".app"),n=e.closest(".app-tray");t(e,n)}),$("[data-toggle-app]").on("click",function(a){var e=$($(this).attr("data-toggle-app")),i=e.closest(".app-tray");e.hasClass(ACTIVE_CLASS)?t(e,i):n(e,i)}),(a=$(".tray-wrapper.auto-resize")).length>0&&($(window).resize(function(){a.each(l)}),a.each(l))});
